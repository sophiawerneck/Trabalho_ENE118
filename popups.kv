#kivy 1.11.1
<ModbusPopup>:
    title: "Configurações MODBUS"
    size_hint_y: None
    size_hint_x: 0.4
    height: 200
    BoxLayout:
        id: layout
        orientation: 'vertical'
        GridLayout:
            cols: 2
            rows: 2
            Label:
                text: "IP"
                fonte_size: 14
            TextInput: 
                id: txt_ip
                text: "127.0.0.1"
                fonte_size: 14
                haling: 'center'
                valing: 'middle'
            Label:
                text: "Porta"
                fonte_size: 14
            TextInput: 
                id: txt_porta
                text: "502"
                fonte_size: 14
                haling: 'center'
                valing: 'middle'                
        BoxLayout:
            orientation:'horizontal'
            Button: 
                size_hint_y: None
                height: 40
                text: "Conectar"
                on_release:
                    root.clearInfo()
                    app.root.startDataRead(txt_ip.text, int(txt_porta.text))
            Button: 
                size_hint_y: None
                height: 40
                text: "Fechar"
                on_release:
                    root.dismiss() 
                    root.clearInfo()

<ScanPopup>:
    title: "Configurações ScanTime"
    size_hint_y: None
    size_hint_x: 0.4
    height: 150
    BoxLayout:
        id: layout
        orientation: 'vertical'
        GridLayout:
            cols: 2
            rows: 1
            Label:
                text: "ScanTime [ms]"
                fonte_size: 14
            TextInput: 
                id: txt_st
                fonte_size: 14
                haling: 'center'
                valing: 'middle'
        BoxLayout:
            orientation:'horizontal'
            Button:
                size_hint_y: None
                height: 40
                text: "Configurar" #modficar o atributo scan_time da calsse MyWidget
                on_release:
                    app.root._scan_time = int(txt_st.text)
                    print(app.root._scan_time)
            Button: 
                size_hint_y: None
                height: 40
                text: "Fechar"
                on_release:
                    root.dismiss() 

<MedicoesPopup>:
    title:"Medições de variáveis elétricas"
    size_hint_y: None
    size_hint_x: 0.8
    height: 500
    BoxLayout:
        orientation: "vertical"
        GridLayout:
            cols: 2
            rows: 14
                
            Label:
                text: "Frequência da rede"
                font_size: 14
            Label:
                id: frequencia
                text: '-.- Hz'
                font_size: 14
                haligh: "center"
                valign: "middle"
                  
            Label:
                text: "Demanda atual"
                font_size: 14
            Label:
                id: demanda_atual
                text: '-.- W'
                font_size: 14
                haligh: "center"
                valign: "middle"
            
            Label:
                text: "Demanda prevista"
                font_size: 14
            Label:
                id: demanda_prevista
                text: '-.- W'
                font_size: 14
                haligh: "center"
                valign: "middle"

            Label:
                text: "Demanda média"
                font_size: 14
            Label:
                id: demanda_media
                text: '-.- W'
                font_size: 14
                haligh: "center"
                valign: "middle"
            
            Label:
                text: "Demanda anterior"
                font_size: 14
            Label:
                id: demanda_anterior
                text: '-.- W'
                font_size: 14
                haligh: "center"
                valign: "middle"

            Label:
                text: "Energia ativa"
                font_size: 14
            Label:
                id: energia_ativa
                text: '-.-'
                font_size: 14
                haligh: "center"
                valign: "middle"    

            Label:
                text: "Potência ativa total"
                font_size: 14
            Label:
                id: ativa_total
                text: '-.- W'
                font_size: 14
                haligh: "center"
                valign: "middle" 

            Label:
                text: "Potência reativa total"
                font_size: 14
            Label:
                id: reativa_total
                text: '-.- W'
                font_size: 14
                haligh: "center"
                valign: "middle"  

            Label:
                text: "Potência aparente total"
                font_size: 14
            Label:
                id: aparente_total
                text: '-.- W'
                font_size: 14
                haligh: "center"
                valign: "middle"   
            
            Label:
                text: "Fator de Potência Total"
                font_size: 14
            Label:
                id: fp_total
                text: '-.-'
                font_size: 14
                haligh: "center"
                valign: "middle"
            
            Label:
                text: "Tensão entre R e S"
                font_size: 14
            Label:
                id: tensao_rs
                text: '-.- V'
                font_size: 14
                haligh: "center"
                valign: "middle"

            Label:
                text: "Tensão entre S e T"
                font_size: 14
            Label:
                id: tensao_st
                text: '-.- V'
                font_size: 14
                haligh: "center"
                valign: "middle"
            
            Label:
                text: "Tensão entre T e R"
                font_size: 14
            Label:
                id: tensao_tr
                text: '-.- V'
                font_size: 14
                haligh: "center"
                valign: "middle"

            Label:
                text: "Corrente Média"
                font_size: 14
            Label:
                id: corrente_media
                text: '-.- A'
                font_size: 14
                haligh: "center"
                valign: "middle"

<ComandoPopup>:
    title:"Comandos do motor"
    size_hint_y: None
    size_hint_x: 0.8
    height: 500
    GridLayout:
        cols:3
        BoxLayout:
            orientation: "vertical"
            size_hint_x: 0.4
            Label:
                text: "Comando da esteira"
                font_size: 14
            Button:                        
                text: "Ligar"
                height: 100   
                on_release: root.setOperacao(1)          
            Button:
                text: "Desligar"
                height: 100
                on_release: root.setOperacao(0)
            Button:
                text: "Reset"
                height: 100
                on_release: root.setOperacao(2)

        Widget:
            size_hint_x: 0.05
        BoxLayout:
            orientation: "vertical"
            size_hint_x: 0.4
            Label:
                text: "Tipo de partida"
                font_size: 14
            Button:                        
                text: "Direta"
                height: 100 
                on_release: root.setPartida('Direta')            
            Button:
                text: "Inversor"
                height: 100
                on_release: root.setPartida('Inversor')
            Button:
                text: "Soft-start"
                height: 100
                on_release: root.setPartida('Soft-start')

<PidPopup>:
    title:"Configuração PID esteira"
    size_hint_y: None
    size_hint_x: 0.8
    height: 600
    BoxLayout:
        orientation: "vertical"
        BoxLayout:
            orientation: "vertical"
            Label:
                text: "Modo de operação:"
                font_size: 16
            GridLayout:
                cols: 2
                rows:2
                Label:
                    text:"Automático"
                    font_size: 14
                CheckBox:
                    id: sel_pid_aut
                    text: "Automático"
                    size: 50, 10
                    group: 'aut/man'
                    active: True
                Label:
                    text:"Manual"
                    font_size: 14
                CheckBox:
                    id: sel_pid_man
                    text: "Manual"
                    size: 50, 10
                    group: 'aut/man'                   
                    active: False
                
        GridLayout:
            cols: 2
            rows:4
            Label:
                text: "Defina o Setpoint(SP):"
                font_size: 14
            TextInput:
                id: carga
                font_size: 14
                text: '-'
                haligh: "center"
                valign: "middle"
                padding: 8,8,8,8
                on_text_validate: root.setSetPoint()
                multiline: False
            Label:
                text: "P:"
                font_size: 14
            TextInput:
                id: p
                font_size: 14
                text: "5.0"
                haligh: "center"
                valign: "middle"
                padding: 8,8,8,8
                on_text_validate: root.setP()   
                multiline: False
            Label:
                text: "I:"
                font_size: 14
            TextInput: 
                id: i
                font_size: 14
                text: "5.0"
                haligh: "center"
                valign: "middle"
                padding: 8,8,8,8
                on_text_validate: root.setI()
                multiline: False
            Label:
                text: "D:"
                font_size: 14
            TextInput:
                id: d
                font_size: 14
                text: "5.0"
                haligh: "center"
                valign: "middle"
                padding: 8,8,8,8
                on_text_validate: root.setD()
                multiline: False
        
        GridLayout:
            cols: 2
            rows: 4
            Label:
                text: 'Status do PID:'
                font_size: 14
            Label:
                id: statusPID
                text: 'Desligado'
                font_size: 14
                haligh: "center"
                valign: "middle"
        GridLayout:
            cols: 2
            rows: 5
            Label: 
                text: "PV"
                font_size: 14
            Label:
                id: le_carga
                text: '-.- Kgf/cm²'
                font_size: 14
                haligh: "center"
                valign: "middle"


